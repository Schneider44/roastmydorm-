<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marrakech - Student Reviews</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }

        /* Navigation Header */
        .navbar {
            background: #ffffff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 70px;
            position: relative;
        }

        .nav-social {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .social-icon {
            color: #1e3a8a;
            font-size: 1.8rem;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .social-icon:hover {
            color: #dc2626;
        }

        .nav-logo {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 800;
            color: #1e3a8a;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            letter-spacing: 1px;
        }

        .nav-logo span {
            background: linear-gradient(135deg, #1e3a8a 0%, #dc2626 50%, #3b82f6 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: gradientShift 3s ease-in-out infinite;
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            text-transform: uppercase;
            position: relative;
        }

        .nav-logo span::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #1e3a8a, #dc2626, #3b82f6);
            border-radius: 8px;
            z-index: -1;
            opacity: 0.1;
            filter: blur(4px);
        }

        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 30px;
        }

        .nav-link {
            text-decoration: none;
            color: #374151;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-link:hover {
            color: #1e3a8a;
        }

        .nav-btn {
            background: #dc2626;
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .nav-btn:hover {
            background: #b91c1c;
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background: #1e3a8a;
            margin: 3px 0;
            transition: 0.3s;
        }

        /* Responsive Navigation */
        @media (max-width: 768px) {
            .nav-social {
                display: none;
            }
            
            .nav-menu {
                display: none;
            }
            
            .hamburger {
                display: flex;
            }
        }

        /* Header Section */
        .header {
            position: relative;
            height: 400px;
            margin-top: 70px; /* Account for fixed navbar */
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4));
            z-index: 1;
        }

        .header-content {
            position: relative;
            z-index: 2;
        }

        /* Multiple Background Images */
        .header::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                url('Marrakech, known as the Red City, is famous for….png'),
                url('daoudiate.png'),
                url('hay mabrouka.png'),
                url('hem.png'),
                url('dormart.png');
            background-size: 
                25% 100%,
                25% 100%,
                25% 100%,
                25% 100%,
                25% 100%;
            background-position: 
                0% 0%,
                25% 0%,
                50% 0%,
                75% 0%,
                100% 0%;
            background-repeat: no-repeat;
            opacity: 0.8;
        }

        .header-content h1 {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header-content p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .location-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .main-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            margin-top: 40px;
        }

        /* Main Content */
        .main-content {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        .content-header {
            margin-bottom: 30px;
        }

        .content-header h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .content-header h2 .highlight {
            color: #007bff;
        }

        .content-header p {
            color: #666;
            font-size: 1rem;
        }

        /* Search and Filters */
        .search-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #007bff;
        }

        .filter-select {
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s ease;
        }

        .filter-select:focus {
            outline: none;
            border-color: #007bff;
        }

        /* Dorm List */
        .dorm-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .dorm-entry {
            display: flex;
            align-items: center;
            padding: 20px;
            border: 1px solid #e9ecef;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: white;
        }

        .dorm-entry:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }

        .dorm-thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            object-fit: cover;
            margin-right: 20px;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        }

        .dorm-info {
            flex: 1;
        }

        .dorm-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        .dorm-location {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .dorm-rating {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stars {
            color: #ffc107;
            font-size: 1.1rem;
        }

        .review-count {
            color: #666;
            font-size: 0.9rem;
        }

        .review-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .review-btn:hover {
            background: #0056b3;
        }

        /* Sidebar */
        .sidebar {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            height: fit-content;
        }

        .sidebar h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #333;
        }

        .qa-block {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }

        .qa-question {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .qa-answer {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .see-more {
            color: #007bff;
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .see-more:hover {
            text-decoration: underline;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content h1 {
                font-size: 2.5rem;
            }

            .main-layout {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .search-filters {
                flex-direction: column;
            }

            .dorm-entry {
                flex-direction: column;
                text-align: center;
            }

            .dorm-thumbnail {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .dorm-rating {
                justify-content: center;
                margin-bottom: 15px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Dorms Modal Styles */
        .dorms-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }

        .dorms-modal.show {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .dorms-modal-content {
            background: white;
            border-radius: 16px;
            padding: 0;
            max-width: 1000px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                transform: translateY(30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .dorms-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid #e5e7eb;
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border-radius: 16px 16px 0 0;
        }

        .dorms-modal-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0;
        }

        .dorms-modal-close {
            background: transparent;
            border: none;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .dorms-modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .dorms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
        }

        .dorm-card {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .dorm-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            transform: translateY(-4px);
        }

        .dorm-card-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        }

        .dorm-card-content {
            padding: 1.25rem;
        }

        .dorm-card-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #111827;
            margin-bottom: 0.5rem;
        }

        .dorm-card-location {
            color: #6b7280;
            font-size: 0.875rem;
            margin-bottom: 0.75rem;
        }

        .dorm-card-rating {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .dorm-card-rating .stars {
            color: #ffc107;
            font-size: 0.875rem;
        }

        .dorm-card-rating .reviews {
            color: #6b7280;
            font-size: 0.875rem;
        }

        .dorm-card-price {
            font-size: 1.25rem;
            font-weight: 700;
            color: #007bff;
            margin-bottom: 1rem;
        }

        .dorm-card-btn {
            width: 100%;
            background: #007bff;
            color: white;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.9rem;
        }

        .dorm-card-btn:hover {
            background: #0056b3;
        }

        .dorms-modal-footer {
            padding: 1.5rem 2rem;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: flex-end;
        }

        .btn-close {
            background: #6b7280;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .btn-close:hover {
            background: #4b5563;
        }

        @media (max-width: 768px) {
            .dorms-grid {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .dorms-modal-header {
                padding: 1rem 1.5rem;
            }

            .dorms-modal-header h2 {
                font-size: 1.25rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-social">
                <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-tiktok"></i></a>
            </div>
            <div class="nav-logo">
                <a href="index.html" style="text-decoration: none; color: inherit;">
                    <span>RoastMyDorm</span>
                </a>
            </div>
            <div class="nav-menu">
                <button class="nav-btn">Sign In</button>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <header class="header">
        <div class="location-badge">
            <i class="fas fa-map-marker-alt"></i> Marrakech, Morocco
        </div>
        <div class="header-content">
            <h1>Marrakech</h1>
            <p>Student Housing Reviews & Information</p>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Main Content Layout -->
        <div class="main-layout">
            <!-- Left Column - Main Content -->
            <div class="main-content">
                <div class="content-header">
                    <h2>Browse <span class="highlight">312</span> Student Reviews</h2>
                    <p>Click on a dorm below to write a review</p>
                </div>

                <!-- Search and Filters -->
                <div class="search-filters">
                    <input type="text" class="search-input" placeholder="Search for your dorm...">
                    <select class="filter-select">
                        <option>Sort by: Number of Reviews</option>
                        <option>Sort by: Rating</option>
                        <option>Sort by: Name</option>
                        <option>Sort by: Location</option>
                    </select>
                    <select class="filter-select">
                        <option>Filter: All Dorms</option>
                        <option>Filter: Single Rooms</option>
                        <option>Filter: Shared Rooms</option>
                        <option>Filter: Studios</option>
                    </select>
                </div>

                <!-- Dorm List -->
                <div class="dorm-list">
                    <!-- Dorm Entry 1 -->
                    <div class="dorm-entry">
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 80'><rect fill='%23e3f2fd' width='80' height='80'/><rect fill='%23bbdefb' x='10' y='20' width='60' height='40'/><rect fill='%2390caf9' x='20' y='30' width='15' height='20'/><rect fill='%2390caf9' x='45' y='30' width='15' height='20'/></svg>" alt="Daoudiate Residence" class="dorm-thumbnail">
                        <div class="dorm-info">
                            <div class="dorm-name">Daoudiate</div>
                            <div class="dorm-location">Near Cadi Ayyad University</div>
                            <div class="dorm-rating">
                                <div class="stars">★★★★☆</div>
                                <div class="review-count">89 reviews</div>
                            </div>
                        </div>
                        <button class="review-btn" onclick="showDaoudiateDorms()">Explore</button>
                    </div>

                    <!-- Dorm Entry 2 -->
                    <div class="dorm-entry">
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 80'><rect fill='%23e8f5e8' width='80' height='80'/><rect fill='%23c8e6c9' x='10' y='20' width='60' height='40'/><rect fill='%23a5d6a7' x='20' y='30' width='15' height='20'/><rect fill='%23a5d6a7' x='45' y='30' width='15' height='20'/></svg>" alt="Hay Mabrouka" class="dorm-thumbnail">
                        <div class="dorm-info">
                            <div class="dorm-name">Hay Mabrouka</div>
                            <div class="dorm-location">Near Fst , Ispits</div>
                            <div class="dorm-rating">
                                <div class="stars">★★★★★</div>
                                <div class="review-count">124 reviews</div>
                            </div>
                        </div>
                        <button class="review-btn" onclick="showHayMabroukaDorms()">Explore</button>
                    </div>

                    <!-- Dorm Entry 3 -->
                    <div class="dorm-entry">
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 80'><rect fill='%23fff3e0' width='80' height='80'/><rect fill='%23ffe0b2' x='10' y='20' width='60' height='40'/><rect fill='%23ffcc02' x='20' y='30' width='15' height='20'/><rect fill='%23ffcc02' x='45' y='30' width='15' height='20'/></svg>" alt="HEM Marrakech" class="dorm-thumbnail">
                        <div class="dorm-info">
                            <div class="dorm-name">Massira</div>
                            <div class="dorm-location">Near HEM Business School</div>
                            <div class="dorm-rating">
                                <div class="stars">★★★☆☆</div>
                                <div class="review-count">67 reviews</div>
                            </div>
                        </div>
                        <button class="review-btn" onclick="showMassiraDorms()">Explore</button>
                    </div>

                    <!-- Dorm Entry 4 -->
                    <div class="dorm-entry">
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 80'><rect fill='%23f3e5f5' width='80' height='80'/><rect fill='%23e1bee7' x='10' y='20' width='60' height='40'/><rect fill='%23ce93d8' x='20' y='30' width='15' height='20'/><rect fill='%23ce93d8' x='45' y='30' width='15' height='20'/></svg>" alt="Red City Dorms" class="dorm-thumbnail">
                        <div class="dorm-info">
                            <div class="dorm-name">Gueliz</div>
                            <div class="dorm-location">Near UPM</div>
                            <div class="dorm-rating">
                                <div class="stars">★★★★☆</div>
                                <div class="review-count">98 reviews</div>
                            </div>
                        </div>
                        <button class="review-btn" onclick="showGuelizDorms()">Explore</button>
                    </div>

                    <!-- Dorm Entry 5 -->
                    <div class="dorm-entry">
                        <img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 80'><rect fill='%23e0f2f1' width='80' height='80'/><rect fill='%23b2dfdb' x='10' y='20' width='60' height='40'/><rect fill='%2380cbc4' x='20' y='30' width='15' height='20'/><rect fill='%2380cbc4' x='45' y='30' width='15' height='20'/></svg>" alt="Marrakech Student Hub" class="dorm-thumbnail">
                        <div class="dorm-info">
                            <div class="dorm-name">Saada , Fadl , Charaf , Izdihar</div>
                            <div class="dorm-location">Agdal District</div>
                            <div class="dorm-rating">
                                <div class="stars">★★★☆☆</div>
                                <div class="review-count">56 reviews</div>
                            </div>
                        </div>
                        <button class="review-btn" onclick="showAgdalDistrictDorms()">Explore</button>
                    </div>
                </div>
            </div>

            <!-- Right Column - Sidebar -->
            <div class="sidebar">
                <h3>Housing Forum</h3>
                
                <div class="qa-block">
                    <div class="qa-question">Best dorms in Marrakech?</div>
                    <div class="qa-answer">
                        "Hay Mabrouka and Daoudiate are definitely the best options. Hay Mabrouka has amazing amenities and the location is perfect for getting to classes. The rooms are spacious and the common areas are well-maintained."
                    </div>
                    <a href="#" class="see-more">See more answers</a>
                </div>

                <div class="qa-block">
                    <div class="qa-question">Worst dorms in Marrakech?</div>
                    <div class="qa-answer">
                        "HEM Marrakech can be pretty rough. The building is old and the rooms are tiny. There are heating issues in the winter and the bathrooms are always crowded."
                    </div>
                    <a href="#" class="see-more">See more answers</a>
                </div>

                <div class="qa-block">
                    <div class="qa-question">What's the social scene like?</div>
                    <div class="qa-answer">
                        "The social life really depends on which dorm you're in. Hay Mabrouka has the best community feel with lots of events. HEM is more quiet and study-focused."
                    </div>
                    <a href="#" class="see-more">See more answers</a>
                </div>

                <div class="qa-block">
                    <div class="qa-question">How's the food situation?</div>
                    <div class="qa-answer">
                        "Most dorms have decent dining halls nearby. Hay Mabrouka has the best food options with multiple restaurants. Daoudiate's dining hall is okay but gets crowded during peak hours."
                    </div>
                    <a href="#" class="see-more">See more answers</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Add some interactive functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Search functionality
            const searchInput = document.querySelector('.search-input');
            const dormEntries = document.querySelectorAll('.dorm-entry');

            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                dormEntries.forEach(entry => {
                    const dormName = entry.querySelector('.dorm-name').textContent.toLowerCase();
                    const dormLocation = entry.querySelector('.dorm-location').textContent.toLowerCase();
                    
                    if (dormName.includes(searchTerm) || dormLocation.includes(searchTerm)) {
                        entry.style.display = 'flex';
                    } else {
                        entry.style.display = 'none';
                    }
                });
            });

            // Sort functionality
            const sortSelect = document.querySelector('.filter-select');
            sortSelect.addEventListener('change', function() {
                const sortBy = this.value;
                const dormList = document.querySelector('.dorm-list');
                const entries = Array.from(dormEntries);

                entries.sort((a, b) => {
                    switch(sortBy) {
                        case 'Sort by: Rating':
                            const ratingA = a.querySelector('.stars').textContent.length;
                            const ratingB = b.querySelector('.stars').textContent.length;
                            return ratingB - ratingA;
                        case 'Sort by: Name':
                            const nameA = a.querySelector('.dorm-name').textContent;
                            const nameB = b.querySelector('.dorm-name').textContent;
                            return nameA.localeCompare(nameB);
                        case 'Sort by: Location':
                            const locationA = a.querySelector('.dorm-location').textContent;
                            const locationB = b.querySelector('.dorm-location').textContent;
                            return locationA.localeCompare(locationB);
                        default: // Number of Reviews
                            const reviewsA = parseInt(a.querySelector('.review-count').textContent);
                            const reviewsB = parseInt(b.querySelector('.review-count').textContent);
                            return reviewsB - reviewsA;
                    }
                });

                // Re-append sorted entries
                entries.forEach(entry => dormList.appendChild(entry));
            });
        });

        // Hay Mabrouka Dorms Data
        const hayMabroukaDorms = [
            {
                id: 1,
                name: "Shared Apartment - Students Bedrooms",
                location: "Hay Mabrouka, Marrakech | Near FST, ISPITS",
                price: "2,500 MAD/month",
                rating: 4.7,
                reviews: 124,
                image: "hay mabrouka.png",
                link: "Hay mabrouka app.html"
            },
            {
                id: 2,
                name: "Luxury Apartment | 2 Bedrooms | Hay Mabrouka",
                location: "Hay Mabrouka, Marrakech | 10 min walk to University",
                price: "4,000 MAD/month",
                rating: 4.8,
                reviews: 87,
                image: "mabrouka st1.png",
                link: "mabrouka studio.html"
            },
            {
                id: 3,
                name: "Studio Apartment Hay Mabrouka",
                location: "Hay Mabrouka, Marrakech | Near FST",
                price: "2,200 MAD/month",
                rating: 4.6,
                reviews: 56,
                image: "hay mabrouka.png",
                link: "#"
            },
            {
                id: 4,
                name: "Modern Room Hay Mabrouka",
                location: "Hay Mabrouka, Marrakech | 8 min walk to ISPITS",
                price: "1,800 MAD/month",
                rating: 4.5,
                reviews: 42,
                image: "hay mabrouka.png",
                link: "#"
            }
        ];

        // Massira Dorms Data
        const massiraDorms = [
            {
                id: 1,
                name: "Massira Student Residence",
                location: "Massira, Marrakech | Near HEM Business School",
                price: "2,000 MAD/month",
                rating: 3.8,
                reviews: 67,
                image: "hem.png",
                link: "#"
            },
            {
                id: 2,
                name: "Shared Apartement | Near FST | Zohour Targa, Salma 1",
                location: "Targa, Marrakech | 5 min walk to HEM",
                price: "3,800 MAD/month",
                rating: 4.6,
                reviews: 34,
                image: "targa app6.png",
                link: "Targa app.html"
            },
            {
                id: 3,
                name: "Shared Room Massira",
                location: "Massira, Marrakech | Near Business School",
                price: "1,200 MAD/month",
                rating: 3.5,
                reviews: 28,
                image: "hem.png",
                link: "#"
            }
        ];

        // M'Hamid Dorms Data
        const GuelizDorms = [
            {
                id: 1,
                name: "Modern Shared Apartement | Near FST | Gueliz",
                location: "M'Hamid, Marrakech | Near UPM",
                price: "2,300 MAD/month",
                rating: 4.4,
                reviews: 98,
                image: "dormart.png",
                link: "Gueliz app.html"
            },
            {
                id: 2,
                name: "Luxury Studio | Garden View | Gueliz",
                location: "M'Hamid, Marrakech | 7 min walk to UPM",
                price: "2,100 MAD/month",
                rating: 4.3,
                reviews: 52,
                image: "dormart.png",
                link: "luxury-studio-gueliz.html"
            },
            {
                id: 3,
                name: "Budget Room | Shared Bath | Semlalia",
                location: "M'Hamid, Marrakech | Near PRIVACY UNIVERSITY MARRAKECH (UPM)",
                price: "1,900 MAD/month",
                rating: 4.2,
                reviews: 41,
                image: "dormart.png",
                link: "semlaliya.html"
            },
            {
                id: 4,
                name: "Shared Flat M'Hamid",
                location: "M'Hamid, Marrakech | 6 min walk to Campus",
                price: "1,500 MAD/month",
                rating: 4.1,
                reviews: 33,
                image: "dormart.png",
                link: "#"
            }
        ];

        // Agdal District (Saada, Fadl, Charaf, Izdihar) Dorms Data
        const IzdiharDorms = [
            {
                id: 1,
                name: "The Modern Apartment",
                location: "Saada, Marrakech | Agdal District",
                price: "2,400 MAD/month",
                rating: 3.8,
                reviews: 56,
                image: "dormart.png",
                link: "saada app.html"
            },
            {
                id: 2,
                name: "SHARED | Izdihar Apartment",
                location: "Izdihar, Marrakech | 10 min walk to Cadi Ayyad Univ.",
                price: "2,100 MAD/month",
                rating: 4.4,
                reviews: 19,
                image: "dormart.png",
                link: "Izdihar app.html"
            },
            {
                id: 3,
                name: "Modern Apartement | Near Fst | Izdihar",
                location: "Izdihar, Marrakech | 5 min walk to Cadi Ayyad Univ.",
                price: "4,000 MAD/month",
                rating: 4.7,
                reviews: 27,
                image: "izdihar app1.png",
                link: " izdihar 2.html.html"
            },
            {
                id: 4,
                name: "Fadl Residence",
                location: "Fadl, Marrakech | Agdal District",
                price: "2,000 MAD/month",
                rating: 3.9,
                reviews: 31,
                image: "dormart.png",
                link: "#"
            },
            {
                id: 5,
                name: "Charaf Student Housing",
                location: "Charaf, Marrakech | Agdal District",
                price: "2,200 MAD/month",
                rating: 4.0,
                reviews: 38,
                image: "dormart.png",
                link: "Charaf.html"
            },
            {
                id: 6,
                name: "Shared Apartement | Near Univ | Dyur Marjane",
                location: "Dyur Marjane, Marrakech | Near University",
                price: "3,000 MAD/month",
                rating: 3.7,
                reviews: 22,
                image: "dyur marjane app1.png",
                link: "Dyur Marjane app.html"
            },
            {
                id:7,
                name : "Shared Apartement | Near Cady Ayyad Univ | Saada",
                location : "Saada , Marrakech | Near Cady Ayyad Univ ",
                price :"4,000 MAD/MONTH",
                rating : 4.4,
                reviews : 5,
                image :"saada app.png",
                link :"saada app2,html"
            }
        ];

        // Daoudiate Dorms Data 
        const DaoudiateDorms = [
            {
                id: 1,
                name: "Apartment | Balcony & AC | Route de Fès",
                location: "Route de Fès, Marrakech | 9 min to Cadi Ayyad Univ. ",
                price: "2,400 MAD/month",
                rating: 3.8,
                reviews: 56,
                image: "dormart.png",
                link: "Route fes app.html"
            },
            {
                id: 2,
                name:"Budget Shared Room | Near HEEC | Al Ouhda 5",
                location :"AL Ouhda 5 , Daoudiate, Marrakech",
                price :"3,000 Mad/Month",
                rating : 4.0,
                reviews : 10,
                image :"Al Ouhda 5.png",
                link:"al ouhda 5.html"
            }
        ];

        // Generic function to show dorms modal
        function showDormsModal(modalId, areaName, dormsArray) {
            // Remove existing modal if any
            const existingModal = document.getElementById(modalId);
            if (existingModal) {
                existingModal.remove();
            }

            // Escape quotes for HTML attributes
            const escapeHtml = (text) => {
                const map = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                };
                return text.replace(/[&<>"']/g, m => map[m]);
            };

            // Escape single quotes for JavaScript strings
            const escapeJs = (text) => {
                return text.replace(/'/g, "\\'").replace(/"/g, '\\"');
            };

            // Create modal HTML
            const modalHTML = `
                <div id="${modalId}" class="dorms-modal" onclick="closeDormsModal('${modalId}', event)">
                    <div class="dorms-modal-content" onclick="event.stopPropagation()">
                        <div class="dorms-modal-header">
                            <h2><i class="fas fa-building"></i> All Dorms in ${escapeHtml(areaName)}</h2>
                            <button class="dorms-modal-close" onclick="closeDormsModal('${modalId}')">&times;</button>
                        </div>
                        <div class="dorms-grid">
                            ${dormsArray.map(dorm => {
                                const safeName = escapeJs(dorm.name);
                                const safeLink = escapeJs(dorm.link);
                                return `
                                <div class="dorm-card" onclick="selectDormForReview('${safeName}', '${safeLink}')">
                                    <img src="${escapeHtml(dorm.image)}" alt="${escapeHtml(dorm.name)}" class="dorm-card-image" 
                                         onerror="this.src='data:image/svg+xml,<svg xmlns=\'http://www.w3.org/2000/svg\' viewBox=\'0 0 280 180\'><rect fill=\'%23e3f2fd\' width=\'280\' height=\'180\'/><rect fill=\'%23bbdefb\' x=\'20\' y=\'40\' width=\'240\' height=\'100\'/></svg>'">
                                    <div class="dorm-card-content">
                                        <h3 class="dorm-card-title">${escapeHtml(dorm.name)}</h3>
                                        <p class="dorm-card-location">${escapeHtml(dorm.location)}</p>
                                        <div class="dorm-card-rating">
                                            <span class="stars">${'★'.repeat(Math.floor(dorm.rating))}${'☆'.repeat(5 - Math.floor(dorm.rating))}</span>
                                            <span class="reviews">${dorm.reviews} reviews</span>
                                        </div>
                                        <div class="dorm-card-price">${escapeHtml(dorm.price)}</div>
                                        <button class="dorm-card-btn" onclick="event.stopPropagation(); selectDormForReview('${safeName}', '${safeLink}')">
                                            Leave a Review
                                        </button>
                                    </div>
                                </div>
                            `;
                            }).join('')}
                        </div>
                        <div class="dorms-modal-footer">
                            <button class="btn-close" onclick="closeDormsModal('${modalId}')">Close</button>
                        </div>
                    </div>
                </div>
            `;

            // Add modal to page
            document.body.insertAdjacentHTML('beforeend', modalHTML);

            // Show modal with animation
            setTimeout(() => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.classList.add('show');
                    document.body.style.overflow = 'hidden'; // Prevent background scrolling
                }
            }, 10);
        }

        // Functions to show dorms for each area
        function showHayMabroukaDorms() {
            showDormsModal('hayMabroukaDormsModal', 'Hay Mabrouka', hayMabroukaDorms);
        }

        function showMassiraDorms() {
            showDormsModal('massiraDormsModal', 'Massira', massiraDorms);
        }

        function showGuelizDorms() {
            showDormsModal('GuelizDormsModal', 'Gueliz', GuelizDorms);
        }

        function showAgdalDistrictDorms() {
            showDormsModal('agdalDistrictDormsModal', 'Agdal District (Saada, Fadl, Charaf, Izdihar)', IzdiharDorms);
        }
        function showDaoudiateDorms() {
            showDormsModal('DaoudiateDormsModal' , 'Daoudiate' , DaoudiateDorms);
        }
        
        // Generic function to close any dorm modal
        function closeDormsModal(modalId, event) {
            if (event && event.target !== event.currentTarget && event.target.classList.contains('dorms-modal-close') === false && event.target.classList.contains('btn-close') === false) {
                return;
            }
            
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.classList.remove('show');
                document.body.style.overflow = ''; // Restore scrolling
                
                // Remove modal after animation
                setTimeout(() => {
                    modal.remove();
                }, 300);
            }
        }

        // Function to select a dorm for review
        function selectDormForReview(dormName, dormLink) {
            // Close any open modal
            const modals = ['hayMabroukaDormsModal', 'massiraDormsModal', 'guelizDormsModal', 'agdalDistrictDormsModal', 'DaoudiateDormsModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal && modal.classList.contains('show')) {
                    closeDormsModal(modalId);
                }
            });
            
            // Small delay to allow modal to close
            setTimeout(() => {
                // If the dorm has a specific link, navigate to it
                if (dormLink && dormLink !== '#') {
                    window.location.href = dormLink;
                } else {
                    // Otherwise, redirect to review form with the dorm name
                    const cityName = 'Marrakech';
                    window.location.href = `review-form.html?dorm=${encodeURIComponent(dormName)}&city=${encodeURIComponent(cityName)}`;
                }
            }, 300);
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                // Close any open modal
                const modals = ['hayMabroukaDormsModal', 'massiraDormsModal', 'guelizDormsModal', 'agdalDistrictDormsModal', 'DaoudiateDormsModal'];
                modals.forEach(modalId => {
                    const modal = document.getElementById(modalId);
                    if (modal && modal.classList.contains('show')) {
                        closeDormsModal(modalId);
                    }
                });
            }
        });
    </script>
</body>
</html>
