<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Izdihar Apartment - RoastMyDorm</title>
    <meta name="description" content="Modern Izdihar apartment with stunning views and premium amenities. Perfect for students in Marrakech with WiFi, AC, and modern facilities.">
    <link rel="icon" type="image/x-icon" href="roastmydorm_logo-removebg-preview.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #1f2937;
            background: #f8fafc;
        }

        /* Dark Header */
        .header {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .logo {
            font-size: 2rem;
            font-weight: 800;
            text-decoration: none;
            text-align: center;
            position: relative;
            display: inline-block;
        }

        .logo span {
            background: linear-gradient(135deg, #1e3a8a 0%, #dc2626 50%, #3b82f6 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-size: 200% 200%;
            animation: gradientShift 3s ease-in-out infinite;
            position: relative;
            z-index: 2;
        }

        .logo span::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(135deg, #1e3a8a 0%, #dc2626 50%, #3b82f6 100%);
            border-radius: 8px;
            z-index: -1;
            opacity: 0.1;
        }

        @keyframes gradientShift {
            0%, 100% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
        }

        .breadcrumbs {
            position: absolute;
            right: 2rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .breadcrumbs {
            color: #e2e8f0;
            font-size: 0.9rem;
        }

        .breadcrumbs a {
            color: #e2e8f0;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .breadcrumbs a:hover {
            color: white;
        }

        /* Main Container */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        /* Apartment Overview Card */
        .apartment-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        .apartment-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: #1f2937;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        .rating-section {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .stars {
            color: #fbbf24;
            font-size: 1.2rem;
        }

        .review-count {
            color: #6b7280;
            font-size: 1rem;
            font-weight: 500;
        }

        .badges {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .badge {
            background: #f1f5f9;
            color: #475569;
            padding: 0.75rem 1.25rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .badge:hover {
            background: #e2e8f0;
            transform: translateY(-1px);
        }

        .badge i {
            font-size: 0.9rem;
        }

        .main-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 12px;
            margin-bottom: 1.5rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .main-image:hover {
            transform: scale(1.02);
        }

        .gallery-thumbnails {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .thumbnail {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .thumbnail:hover {
            transform: translateY(-2px);
            border-color: #dc2626;
        }

        .gallery-tabs {
            display: flex;
            gap: 2rem;
            border-bottom: 2px solid #f1f5f9;
        }

        .gallery-tab {
            color: #6b7280;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 600;
            padding: 1rem 0;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .gallery-tab.active {
            color: #dc2626;
            border-bottom-color: #dc2626;
        }

        .gallery-tab:hover {
            color: #dc2626;
        }

        /* Booking Card */
        .booking-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            height: fit-content;
            position: sticky;
            top: 2rem;
        }

        .price-section {
            margin-bottom: 2rem;
            text-align: center;
        }

        .current-price {
            font-size: 3rem;
            font-weight: 800;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .price-period {
            color: #6b7280;
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .original-price {
            color: #9ca3af;
            text-decoration: line-through;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .info-icon {
            color: #6b7280;
            font-size: 1rem;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .info-icon:hover {
            color: #dc2626;
        }

        .advance-rent-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .advance-rent-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            color: #374151;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            background: white;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .checkbox-group {
            margin-bottom: 2rem;
        }

        .checkbox-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .checkbox {
            margin-top: 0.25rem;
            transform: scale(1.2);
        }

        .checkbox-label {
            font-size: 0.9rem;
            color: #374151;
            line-height: 1.5;
        }

        .checkbox-label a {
            color: #dc2626;
            text-decoration: none;
        }

        .checkbox-label a:hover {
            text-decoration: underline;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(220, 38, 38, 0.3);
        }

        .btn-secondary {
            background: white;
            color: #dc2626;
            border: 2px solid #dc2626;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .btn-secondary:hover {
            background: #dc2626;
            color: white;
            transform: translateY(-2px);
        }

        .guarantee-btn {
            background: #f8fafc;
            color: #6b7280;
            border: 1px solid #e5e7eb;
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .guarantee-btn:hover {
            background: #f1f5f9;
            color: #374151;
        }

        /* Room Details Section */
        .room-details {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            margin-top: 2rem;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .section-title i {
            color: #dc2626;
        }

        .room-specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .spec-item {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }

        .spec-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .spec-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .spec-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }

        .spec-desc {
            color: #6b7280;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .amenities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }

        .amenity-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }

        .amenity-item:hover {
            background: #f1f5f9;
            transform: translateX(4px);
        }

        .amenity-icon {
            color: #dc2626;
            font-size: 1.1rem;
        }

        .amenity-text {
            color: #374151;
            font-weight: 500;
        }

        /* Location Map Section */
        .location-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            margin-top: 2rem;
        }

        .location-info {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .address-card {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }

        .address-card h3 {
            color: #1f2937;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .address-card p {
            color: #6b7280;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .address-card i {
            color: #dc2626;
            width: 20px;
        }

        .map-container {
            position: relative;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .map {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, #e5e7eb 0%, #d1d5db 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            font-size: 1.1rem;
            font-weight: 500;
            position: relative;
        }

        .map::before {
            content: 'üìç Interactive Map - Izdihar District, Marrakech';
            text-align: center;
        }

        .map-overlay {
            position: absolute;
            top: 1rem;
            right: 1rem;
        }

        .map-btn {
            background: rgba(255, 255, 255, 0.9);
            color: #374151;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .map-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .nearby-places {
            margin-top: 2rem;
        }

        .nearby-places h3 {
            color: #1f2937;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .places-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .place-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }

        .place-item:hover {
            background: #f1f5f9;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .place-item i {
            color: #dc2626;
            font-size: 1.2rem;
            width: 24px;
        }

        .place-item div {
            flex: 1;
        }

        .place-item strong {
            display: block;
            color: #1f2937;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .place-item span {
            color: #6b7280;
            font-size: 0.9rem;
        }

        /* Reviews Section */
        .reviews-section {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            margin-top: 2rem;
        }

        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .write-review-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .write-review-btn:hover {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .review-item {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }

        .review-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .review-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .review-info {
            flex: 1;
        }

        .reviewer-name {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 0.25rem;
        }

        .review-date {
            color: #6b7280;
            font-size: 0.85rem;
        }

        .review-stars {
            color: #fbbf24;
            font-size: 1rem;
        }

        .review-text {
            color: #374151;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .review-actions {
            display: flex;
            gap: 1rem;
        }

        .review-action {
            color: #6b7280;
            text-decoration: none;
            font-size: 0.85rem;
            transition: color 0.3s ease;
        }

        .review-action:hover {
            color: #dc2626;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1f2937;
        }

        .close {
            color: #6b7280;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #dc2626;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .rating-input {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .star-input {
            font-size: 2rem;
            color: #e5e7eb;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .star-input:hover,
        .star-input.active {
            color: #fbbf24;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-container {
                grid-template-columns: 1fr;
                padding: 1rem;
            }

            .booking-card {
                position: static;
            }
        }

        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .breadcrumbs {
                position: static;
                transform: none;
                margin-top: 0.5rem;
            }

            .apartment-title {
                font-size: 2rem;
            }

            .badges {
                justify-content: center;
            }

            .gallery-thumbnails {
                justify-content: center;
            }

            .room-specs {
                grid-template-columns: 1fr;
            }

            .amenities-grid {
                grid-template-columns: 1fr;
            }

            .location-info {
                grid-template-columns: 1fr;
            }

            .places-grid {
                grid-template-columns: 1fr;
            }

            .reviews-header {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }

            .action-buttons {
                gap: 0.75rem;
            }

            .btn-primary,
            .btn-secondary {
                padding: 0.875rem 1.5rem;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .main-container {
                padding: 0.5rem;
            }

            .apartment-card,
            .booking-card,
            .room-details,
            .reviews-section {
                padding: 1.5rem;
            }

            .gallery-thumbnails {
                flex-wrap: wrap;
            }

            .thumbnail {
                width: 80px;
                height: 80px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #dc2626;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Success Message */
        .success-message {
            background: #d1fae5;
            color: #065f46;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        .error-message {
            background: #fee2e2;
            color: #991b1b;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        /* Image Lightbox Modal */
        .image-lightbox-modal {
            display: block;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .lightbox-content {
            position: relative;
            margin: auto;
            padding: 20px;
            width: 90%;
            max-width: 1000px;
            top: 50%;
            transform: translateY(-50%);
            text-align: center;
        }

        .lightbox-image {
            max-width: 100%;
            max-height: 80vh;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            animation: zoomIn 0.3s ease;
        }

        @keyframes zoomIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .lightbox-close {
            position: absolute;
            top: 20px;
            right: 30px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10001;
            transition: color 0.3s ease;
            background: rgba(0, 0, 0, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .lightbox-close:hover {
            color: #ef4444;
            background: rgba(0, 0, 0, 0.8);
        }

        .lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: white;
            font-size: 30px;
            cursor: pointer;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            transition: background 0.3s ease;
            user-select: none;
        }

        .lightbox-nav:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        .lightbox-prev {
            left: 30px;
        }

        .lightbox-next {
            right: 30px;
        }

        /* Main image transition */
        .main-image {
            transition: opacity 0.3s ease;
        }

        /* Booking Modal Date Picker */
        .booking-modal-content {
            max-width: 800px;
            width: 95%;
        }

        .date-selection-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }

        .date-selection-header {
            margin-bottom: 1.5rem;
        }

        .date-title h4 {
            color: #1f2937;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .date-title p {
            color: #6b7280;
            font-size: 0.9rem;
            margin: 0;
        }

        .date-inputs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .date-input-group {
            flex: 1;
        }

        .date-label {
            display: block;
            color: #374151;
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .date-input {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .date-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .date-input.active {
            border-color: #1e40af;
            background: #eff6ff;
        }

        .calendar-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .calendar {
            background: white;
            border-radius: 12px;
            padding: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .calendar-nav {
            background: #f3f4f6;
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #374151;
            transition: all 0.3s ease;
        }

        .calendar-nav:hover {
            background: #e5e7eb;
            color: #1f2937;
        }

        .month-year {
            display: flex;
            gap: 0.5rem;
        }

        .month-year select {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 0.5rem;
            background: white;
            color: #374151;
            font-weight: 600;
            cursor: pointer;
        }

        .month-year select:focus {
            outline: none;
            border-color: #3b82f6;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.25rem;
        }

        .day-header {
            text-align: center;
            font-weight: 600;
            color: #6b7280;
            font-size: 0.8rem;
            padding: 0.5rem 0;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            color: #374151;
            transition: all 0.3s ease;
            position: relative;
        }

        .calendar-day:hover {
            background: #f3f4f6;
        }

        .calendar-day.other-month {
            color: #d1d5db;
        }

        .calendar-day.selected {
            background: #3b82f6;
            color: white;
        }

        .calendar-day.in-range {
            background: #dbeafe;
            color: #1e40af;
        }

        .calendar-day.start-date {
            background: #1e40af;
            color: white;
            font-weight: 600;
        }

        .calendar-day.end-date {
            background: #1e40af;
            color: white;
            font-weight: 600;
        }

        .calendar-day.disabled {
            color: #d1d5db;
            cursor: not-allowed;
        }

        .calendar-day.disabled:hover {
            background: transparent;
        }

        .date-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            align-items: center;
        }

        .clear-dates-btn {
            background: none;
            border: none;
            color: #6b7280;
            text-decoration: underline;
            cursor: pointer;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .clear-dates-btn:hover {
            color: #374151;
        }

        .apply-dates-btn {
            background: #f59e0b;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .apply-dates-btn:hover {
            background: #d97706;
            transform: translateY(-1px);
        }

        .apply-dates-btn:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        /* Responsive Design for Date Picker */
        @media (max-width: 768px) {
            .calendar-container {
                grid-template-columns: 1fr;
            }

            .date-inputs {
                flex-direction: column;
            }

            .date-actions {
                flex-direction: column;
                align-items: stretch;
            }

            .apply-dates-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Dark Header -->
    <header class="header">
        <div class="header-container">
            <a href="index.html" class="logo"><span>RoastMyDorm</span></a>
            <div class="breadcrumbs">
                <a href="index.html">Home</a> > <a href="marrakech-dorms.html">Marrakech</a> > Izdihar Apartment
        </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Apartment Overview Card -->
        <div class="apartment-card">
            <h1 class="apartment-title">Izdihar Apartment, Marrakech</h1>
            
            <div class="rating-section">
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                <span class="review-count">(120 reviews)</span>
                </div>

            <div class="badges">
                <div class="badge">
                    <i class="fas fa-user-graduate"></i>
                    Student Accommodation
                </div>
                <div class="badge">
                    <i class="fas fa-check-circle"></i>
                    On-site Verification
                </div>
                <div class="badge">
                    <i class="fas fa-map-marker-alt"></i>
                    View Distance to Universities
                </div>
                    </div>

            <img src="izdihar app 6.png" alt="Izdihar Apartment" class="main-image" onclick="openImageModal()">

            <div class="gallery-thumbnails">
                <img src="izdihar app 5.png" alt="Kitchen" class="thumbnail" onclick="changeMainImage(this)">
                <img src="izdihar app 6.png" alt="Bedroom" class="thumbnail" onclick="changeMainImage(this)">
                <img src="izdihar app 5.png" alt="Living Room" class="thumbnail" onclick="changeMainImage(this)">
                <img src="izdihar app 6.png" alt="Exterior" class="thumbnail" onclick="changeMainImage(this)">
                    </div>

            <div class="gallery-tabs">
                <a href="#" class="gallery-tab active">Photos (5)</a>
                <a href="#" class="gallery-tab">Videos (8)</a>
                <a href="#" class="gallery-tab">3D Views (2)</a>
                <a href="#" class="gallery-tab">Virtual Tour (1)</a>
                    </div>
                </div>

        <!-- Booking Card -->
        <div class="booking-card">
            <div class="price-section">
                <div class="current-price">3,000 MAD</div>
                <div class="price-period">per month</div>
                <div class="original-price">
                    3,500 MAD
                    <i class="fas fa-info-circle info-icon" onclick="showPriceInfo()"></i>
            </div>
            </div>

            <button class="advance-rent-btn" onclick="showAdvanceRentInfo()">
                <span>Advance rent 1,050 MAD</span>
                <i class="fas fa-arrow-right"></i>
            </button>

            <div class="form-group">
                <label class="form-label">First Name *</label>
                <input type="text" class="form-input" placeholder="Enter your first name" required>
                    </div>

            <div class="form-group">
                <label class="form-label">Last Name *</label>
                <input type="text" class="form-input" placeholder="Enter your last name" required>
                        </div>

            <div class="form-group">
                <label class="form-label">Email *</label>
                <input type="email" class="form-input" placeholder="Enter your email" required>
                    </div>

            <div class="form-group">
                <label class="form-label">Phone Number *</label>
                <input type="tel" class="form-input" placeholder="Enter your phone number" required>
                        </div>

            <div class="checkbox-group">
                <div class="checkbox-item">
                    <input type="checkbox" class="checkbox" id="privacy" required>
                    <label for="privacy" class="checkbox-label">
                        I agree to the <a href="#">Privacy Policy</a> and <a href="#">Terms of Service</a>
                    </label>
                        </div>
                        </div>

            <div class="action-buttons">
                <button class="btn-primary" onclick="openBookingModal()">
                    <i class="fas fa-calendar-check"></i>
                    Book Now
                </button>
                <button class="btn-secondary" onclick="openContactModal()">
                    <i class="fas fa-phone"></i>
                    Contact Landlord
                </button>
                        </div>

            <button class="guarantee-btn" onclick="showGuaranteeInfo()">
                <span>Lower Price Guarantee</span>
                <i class="fas fa-chevron-down"></i>
            </button>
                    </div>
    </div>

    <!-- Room Details Section -->
    <div class="main-container">
        <div class="room-details">
                    <h2 class="section-title">
                        <i class="fas fa-home"></i>
                Room Details & Amenities
                    </h2>
            
            <div class="room-specs">
                <div class="spec-item">
                    <div class="spec-icon">
                        <i class="fas fa-bed"></i>
                    </div>
                    <div class="spec-title">3 Bedrooms</div>
                    <div class="spec-desc">Spacious bedrooms with modern furniture and large windows for natural light.</div>
                </div>
                <div class="spec-item">
                    <div class="spec-icon">
                        <i class="fas fa-bath"></i>
                    </div>
                    <div class="spec-title">2 Bathrooms</div>
                    <div class="spec-desc">Modern bathroom with shower, toilet, and vanity. Fully tiled and well-maintained.</div>
                </div>
                <div class="spec-item">
                    <div class="spec-icon">
                        <i class="fas fa-couch"></i>
                    </div>
                    <div class="spec-title">Living Area</div>
                    <div class="spec-desc">Open-plan living room with comfortable seating and entertainment area.</div>
                </div>
                <div class="spec-item">
                    <div class="spec-icon">
                        <i class="fas fa-utensils"></i>
                    </div>
                    <div class="spec-title">Kitchen</div>
                    <div class="spec-desc">Fully equipped kitchen with modern appliances, refrigerator, and cooking facilities.</div>
                </div>
                <div class="spec-item">
                    <div class="spec-icon">
                                <i class="fas fa-wifi"></i>
                            </div>
                    <div class="spec-title">High-Speed WiFi</div>
                    <div class="spec-desc">Unlimited high-speed internet included in rent. Perfect for online learning and work.</div>
                        </div>
                <div class="spec-item">
                    <div class="spec-icon">
                                <i class="fas fa-snowflake"></i>
                            </div>
                    <div class="spec-title">Air Conditioning</div>
                    <div class="spec-desc">Central air conditioning system for year-round comfort in all rooms.</div>
                        </div>
            </div>

            <h3 style="margin: 2rem 0 1rem 0; color: #1f2937; font-size: 1.3rem;">Additional Amenities</h3>
            <div class="amenities-grid">
                        <div class="amenity-item">
                    <i class="fas fa-shield-alt amenity-icon"></i>
                    <span class="amenity-text">24/7 Security</span>
                            </div>
                <div class="amenity-item">
                    <i class="fas fa-car amenity-icon"></i>
                    <span class="amenity-text">Parking Space</span>
                        </div>
                        <div class="amenity-item">
                    <i class="fas fa-tshirt amenity-icon"></i>
                    <span class="amenity-text">Laundry Facilities</span>
                            </div>
                <div class="amenity-item">
                    <i class="fas fa-dumbbell amenity-icon"></i>
                    <span class="amenity-text">Gym Access</span>
                        </div>
                        <div class="amenity-item">
                    <i class="fas fa-swimming-pool amenity-icon"></i>
                    <span class="amenity-text">Swimming Pool</span>
                            </div>
                <div class="amenity-item">
                    <i class="fas fa-book amenity-icon"></i>
                    <span class="amenity-text">Study Room</span>
                        </div>
                        <div class="amenity-item">
                    <i class="fas fa-users amenity-icon"></i>
                    <span class="amenity-text">Common Areas</span>
                            </div>
                <div class="amenity-item">
                    <i class="fas fa-leaf amenity-icon"></i>
                    <span class="amenity-text">Garden</span>
                        </div>
                    </div>
        </div>
    </div>

                <!-- Location Map Section -->
    <div class="main-container">
        <div class="location-section">
            <h2 class="section-title">
                <i class="fas fa-map-marker-alt"></i>
                Location & Map
            </h2>
            
            <div class="location-info">
                <div class="address-card">
                    <h3>Address</h3>
                    <p><i class="fas fa-map-marker-alt"></i> Izdihar District, Marrakech, Morocco</p>
                    <p><i class="fas fa-university"></i> 10 minutes walk to Cadi Ayyad University</p>
                    <p><i class="fas fa-bus"></i> 5 minutes walk to public transport</p>
                    <p><i class="fas fa-shopping-cart"></i> 3 minutes walk to shopping center</p>
                </div>
                
                <div class="map-container">
                    <div id="map" class="map"></div>
                    <div class="map-overlay">
                        <button class="map-btn" onclick="openFullMap()">
                            <i class="fas fa-expand"></i>
                            View Full Map
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="nearby-places">
                <h3>Nearby Places</h3>
                <div class="places-grid">
                    <div class="place-item">
                        <i class="fas fa-university"></i>
                        <div>
                            <strong>Cadi Ayyad University</strong>
                            <span>10 min walk</span>
                        </div>
                    </div>
                    <div class="place-item">
                        <i class="fas fa-shopping-cart"></i>
                        <div>
                            <strong>Marrakech Plaza</strong>
                            <span>3 min walk</span>
                        </div>
                    </div>
                    <div class="place-item">
                        <i class="fas fa-utensils"></i>
                        <div>
                            <strong>Restaurant District</strong>
                            <span>5 min walk</span>
                        </div>
                    </div>
                    <div class="place-item">
                        <i class="fas fa-hospital"></i>
                        <div>
                            <strong>Medical Center</strong>
                            <span>8 min walk</span>
                        </div>
                    </div>
                    <div class="place-item">
                        <i class="fas fa-bus"></i>
                        <div>
                            <strong>Bus Station</strong>
                            <span>5 min walk</span>
                        </div>
                    </div>
                    <div class="place-item">
                        <i class="fas fa-plane"></i>
                        <div>
                            <strong>Marrakech Airport</strong>
                            <span>25 min drive</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Reviews Section -->
    <div class="main-container">
        <div class="reviews-section">
            <div class="reviews-header">
                    <h2 class="section-title">
                        <i class="fas fa-star"></i>
                    Reviews (120)
                    </h2>
                <button class="write-review-btn" onclick="openReviewModal()">
                    <i class="fas fa-pen"></i>
                    Write a Review
                </button>
            </div>
            
                    <div class="review-item">
                        <div class="review-header">
                    <div class="review-avatar">A</div>
                    <div class="review-info">
                        <div class="reviewer-name">Ahmed K.</div>
                        <div class="review-date">March 15, 2024</div>
                    </div>
                            <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        </div>
                <p class="review-text">
                    "Excellent apartment with modern amenities! The location is perfect for university students, 
                    and the landlord is very responsive. The WiFi is fast and reliable, and the building is 
                    well-maintained. Highly recommended for anyone looking for quality student accommodation."
                </p>
                <div class="review-actions">
                    <a href="#" class="review-action">Helpful (12)</a>
                    <a href="#" class="review-action">Reply</a>
                    </div>
            </div>

                    <div class="review-item">
                        <div class="review-header">
                    <div class="review-avatar">F</div>
                    <div class="review-info">
                        <div class="reviewer-name">Fatima A.</div>
                        <div class="review-date">February 28, 2024</div>
                    </div>
                            <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                        </div>
                <p class="review-text">
                    "Great value for money! The apartment is clean and well-furnished. The kitchen has all 
                    the necessary appliances, and the living area is spacious. The only minor issue is that 
                    the building can be a bit noisy during peak hours, but overall it's a great place to live."
                </p>
                <div class="review-actions">
                    <a href="#" class="review-action">Helpful (8)</a>
                    <a href="#" class="review-action">Reply</a>
                    </div>
            </div>

                    <div class="review-item">
                        <div class="review-header">
                    <div class="review-avatar">Y</div>
                    <div class="review-info">
                        <div class="reviewer-name">Youssef M.</div>
                        <div class="review-date">February 10, 2024</div>
                        </div>
                    <div class="review-stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    </div>
                <p class="review-text">
                    "Perfect location near the university! The apartment has everything you need for 
                    comfortable student living. The landlord is very helpful and quick to respond to any 
                    maintenance requests. The building has good security and the common areas are well-maintained."
                </p>
                <div class="review-actions">
                    <a href="#" class="review-action">Helpful (15)</a>
                    <a href="#" class="review-action">Reply</a>
                </div>
            </div>
        </div>
            </div>

    <!-- Booking Modal -->
    <div id="bookingModal" class="modal">
        <div class="modal-content booking-modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Book Your Stay</h3>
                <span class="close" onclick="closeModal('bookingModal')">&times;</span>
            </div>
            <div class="success-message" id="bookingSuccess">Booking request submitted successfully!</div>
            <div class="error-message" id="bookingError">Please fill in all required fields.</div>
            
            <!-- Date Selection Section -->
            <div class="date-selection-section">
                <div class="date-selection-header">
                    <div class="date-title">
                        <h4>Select your dates</h4>
                        <p>Minimum stay: 30 days</p>
                    </div>
                </div>
                
                <div class="date-inputs">
                    <div class="date-input-group">
                        <label class="date-label">MOVE IN</label>
                        <input type="text" class="date-input" id="moveInDate" placeholder="Date" readonly>
                    </div>
                    <div class="date-input-group">
                        <label class="date-label">MOVE OUT</label>
                        <input type="text" class="date-input" id="moveOutDate" placeholder="Date" readonly>
                    </div>
                </div>
                
                <!-- Calendar Container -->
                <div class="calendar-container">
                    <div class="calendar">
                        <div class="calendar-header">
                            <button class="calendar-nav" onclick="changeMonth(-1)">‚Äπ</button>
                            <div class="month-year">
                                <select id="month1" onchange="updateCalendar()">
                                    <option value="0">January</option>
                                    <option value="1">February</option>
                                    <option value="2">March</option>
                                    <option value="3">April</option>
                                    <option value="4">May</option>
                                    <option value="5">June</option>
                                    <option value="6">July</option>
                                    <option value="7">August</option>
                                    <option value="8">September</option>
                                    <option value="9">October</option>
                                    <option value="10">November</option>
                                    <option value="11">December</option>
                                </select>
                                <select id="year1" onchange="updateCalendar()">
                                    <option value="2024">2024</option>
                                    <option value="2025" selected>2025</option>
                                    <option value="2026">2026</option>
                                </select>
                            </div>
                        </div>
                        <div class="calendar-grid" id="calendar1">
                            <div class="day-header">MON</div>
                            <div class="day-header">TUE</div>
                            <div class="day-header">WED</div>
                            <div class="day-header">THU</div>
                            <div class="day-header">FRI</div>
                            <div class="day-header">SAT</div>
                            <div class="day-header">SUN</div>
                        </div>
                    </div>
                    
                    <div class="calendar">
                        <div class="calendar-header">
                            <div class="month-year">
                                <select id="month2" onchange="updateCalendar()">
                                    <option value="0">January</option>
                                    <option value="1">February</option>
                                    <option value="2">March</option>
                                    <option value="3">April</option>
                                    <option value="4">May</option>
                                    <option value="5">June</option>
                                    <option value="6">July</option>
                                    <option value="7">August</option>
                                    <option value="8">September</option>
                                    <option value="9">October</option>
                                    <option value="10">November</option>
                                    <option value="11">December</option>
                                </select>
                                <select id="year2" onchange="updateCalendar()">
                                    <option value="2024">2024</option>
                                    <option value="2025" selected>2025</option>
                                    <option value="2026">2026</option>
                                </select>
                            </div>
                            <button class="calendar-nav" onclick="changeMonth(1)">‚Ä∫</button>
                        </div>
                        <div class="calendar-grid" id="calendar2">
                            <div class="day-header">MON</div>
                            <div class="day-header">TUE</div>
                            <div class="day-header">WED</div>
                            <div class="day-header">THU</div>
                            <div class="day-header">FRI</div>
                            <div class="day-header">SAT</div>
                            <div class="day-header">SUN</div>
                        </div>
                    </div>
                </div>
                
                <div class="date-actions">
                    <button class="clear-dates-btn" onclick="clearDates()">Clear dates</button>
                    <button class="apply-dates-btn" onclick="applyDates()">Apply dates</button>
                </div>
            </div>
            
            <form id="bookingForm">
                <div class="form-group">
                    <label class="form-label">Number of Guests *</label>
                    <select class="form-input" required>
                        <option value="">Select number of guests</option>
                        <option value="1">1 Guest</option>
                        <option value="2">2 Guests</option>
                        <option value="3">3 Guests</option>
                        <option value="4">4 Guests</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Special Requests</label>
                    <textarea class="form-input" placeholder="Any special requests or requirements?"></textarea>
                </div>
                <button type="submit" class="btn-primary" style="width: 100%;">
                    <i class="fas fa-calendar-check"></i>
                    Confirm Booking
                </button>
            </form>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Contact Landlord</h3>
                <span class="close" onclick="closeModal('contactModal')">&times;</span>
                        </div>
            <div class="success-message" id="contactSuccess">Message sent successfully!</div>
            <div class="error-message" id="contactError">Please fill in all required fields.</div>
            <form id="contactForm">
                <div class="form-group">
                    <label class="form-label">Subject *</label>
                    <input type="text" class="form-input" placeholder="What is this about?" required>
                    </div>
                <div class="form-group">
                    <label class="form-label">Message *</label>
                    <textarea class="form-input" placeholder="Your message to the landlord" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Your Email *</label>
                    <input type="email" class="form-input" placeholder="Your email address" required>
            </div>
                <button type="submit" class="btn-primary" style="width: 100%;">
                    <i class="fas fa-paper-plane"></i>
                    Send Message
                </button>
            </form>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Write a Review</h3>
                <span class="close" onclick="closeModal('reviewModal')">&times;</span>
            </div>
            <div class="success-message" id="reviewSuccess">Review submitted successfully!</div>
            <div class="error-message" id="reviewError">Please fill in all required fields.</div>
            <form id="reviewForm">
                <div class="form-group">
                    <label class="form-label">Overall Rating *</label>
                    <div class="rating-input">
                        <span class="star-input" onclick="setRating(1)">‚òÖ</span>
                        <span class="star-input" onclick="setRating(2)">‚òÖ</span>
                        <span class="star-input" onclick="setRating(3)">‚òÖ</span>
                        <span class="star-input" onclick="setRating(4)">‚òÖ</span>
                        <span class="star-input" onclick="setRating(5)">‚òÖ</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Review Title *</label>
                    <input type="text" class="form-input" placeholder="Summarize your experience" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Your Review *</label>
                    <textarea class="form-input" placeholder="Share your experience with other students" required></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Your Name *</label>
                    <input type="text" class="form-input" placeholder="Your name" required>
                </div>
                <button type="submit" class="btn-primary" style="width: 100%;">
                    <i class="fas fa-star"></i>
                    Submit Review
                </button>
            </form>
        </div>
    </div>

    <script>
        // Image gallery functionality
        function changeMainImage(thumbnail) {
            const mainImage = document.querySelector('.main-image');
            if (mainImage && thumbnail) {
                mainImage.src = thumbnail.src;
                mainImage.alt = thumbnail.alt;
                
                // Add a smooth transition effect
                mainImage.style.opacity = '0.7';
                setTimeout(() => {
                    mainImage.style.opacity = '1';
                }, 150);
            }
        }

        function openImageModal() {
            // Create a lightbox modal for full-screen image viewing
            const mainImage = document.querySelector('.main-image');
            if (mainImage) {
                const lightbox = document.createElement('div');
                lightbox.className = 'image-lightbox-modal';
                lightbox.innerHTML = `
                    <div class="lightbox-content">
                        <span class="lightbox-close">&times;</span>
                        <img src="${mainImage.src}" alt="${mainImage.alt}" class="lightbox-image">
                        <div class="lightbox-nav lightbox-prev" onclick="navigateImage(-1)">‚Äπ</div>
                        <div class="lightbox-nav lightbox-next" onclick="navigateImage(1)">‚Ä∫</div>
                    </div>
                `;
                
                document.body.appendChild(lightbox);
                document.body.style.overflow = 'hidden';
                
                // Close lightbox functionality
                lightbox.querySelector('.lightbox-close').onclick = () => {
                    document.body.removeChild(lightbox);
                    document.body.style.overflow = 'auto';
                };
                
                lightbox.onclick = (e) => {
                    if (e.target === lightbox) {
                        document.body.removeChild(lightbox);
                        document.body.style.overflow = 'auto';
                    }
                };
            }
        }

        // Image navigation for lightbox
        function navigateImage(direction) {
            const lightboxImage = document.querySelector('.lightbox-image');
            if (lightboxImage) {
                const images = [
                    'izdihar app 6.png',
                    'izdihar app 5.png',
                    'izdihar app 6.png',
                    'izdihar app 5.png'
                ];
                
                let currentIndex = images.indexOf(lightboxImage.src.split('/').pop());
                currentIndex += direction;
                
                if (currentIndex < 0) currentIndex = images.length - 1;
                if (currentIndex >= images.length) currentIndex = 0;
                
                lightboxImage.src = images[currentIndex];
            }
        }

        // Gallery tab switching
        document.querySelectorAll('.gallery-tab').forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.gallery-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
            // Clear form messages
            document.querySelectorAll('.success-message, .error-message').forEach(msg => {
                msg.style.display = 'none';
            });
        }

        function openBookingModal() {
            openModal('bookingModal');
        }

        function openContactModal() {
            openModal('contactModal');
        }

        function openReviewModal() {
            openModal('reviewModal');
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // Rating system
        function setRating(rating) {
            const stars = document.querySelectorAll('.star-input');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // Form submissions
        document.getElementById('bookingForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showMessage('bookingSuccess');
        });

        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showMessage('contactSuccess');
        });

        document.getElementById('reviewForm').addEventListener('submit', function(e) {
            e.preventDefault();
            showMessage('reviewSuccess');
        });

        function showMessage(messageId) {
            document.getElementById(messageId).style.display = 'block';
            setTimeout(() => {
                document.getElementById(messageId).style.display = 'none';
            }, 3000);
        }

        // Info functions
        function showPriceInfo() {
            alert('Original price: 2,500 MAD/month\nCurrent price: 2,100 MAD/month\nYou save: 400 MAD/month (16% discount)');
        }

        function showAdvanceRentInfo() {
            alert('Advance rent is typically 50% of the monthly rent and is required to secure your booking.');
        }

        function showGuaranteeInfo() {
            alert('We guarantee the lowest price! If you find the same apartment for less elsewhere, we will match the price and give you an additional 5% discount.');
        }

        // Map functionality
        function openFullMap() {
            // Open Google Maps in a new tab with the apartment location
            const address = 'Izdihar District, Marrakech, Morocco';
            const encodedAddress = encodeURIComponent(address);
            const googleMapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodedAddress}`;
            window.open(googleMapsUrl, '_blank');
        }

        // Initialize map when page loads
        function initializeMap() {
            const mapElement = document.getElementById('map');
            if (mapElement) {
                // Add click event to open full map
                mapElement.addEventListener('click', openFullMap);
                
                // Add hover effect
                mapElement.style.cursor = 'pointer';
                mapElement.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.02)';
                    this.style.transition = 'transform 0.3s ease';
                });
                
                mapElement.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            }
        }

        // Initialize map on page load
        document.addEventListener('DOMContentLoaded', initializeMap);

        // Date Picker Functionality
        let selectedStartDate = null;
        let selectedEndDate = null;
        let currentDate = new Date();
        let currentMonth1 = currentDate.getMonth();
        let currentYear1 = currentDate.getFullYear();
        let currentMonth2 = currentDate.getMonth() + 1;
        let currentYear2 = currentDate.getFullYear();

        // Initialize date picker when modal opens
        function initializeDatePicker() {
            // Set initial months
            if (currentMonth2 > 11) {
                currentMonth2 = 0;
                currentYear2++;
            }
            
            document.getElementById('month1').value = currentMonth1;
            document.getElementById('year1').value = currentYear1;
            document.getElementById('month2').value = currentMonth2;
            document.getElementById('year2').value = currentYear2;
            
            updateCalendar();
        }

        function updateCalendar() {
            const month1 = parseInt(document.getElementById('month1').value);
            const year1 = parseInt(document.getElementById('year1').value);
            const month2 = parseInt(document.getElementById('month2').value);
            const year2 = parseInt(document.getElementById('year2').value);
            
            renderCalendar('calendar1', month1, year1);
            renderCalendar('calendar2', month2, year2);
            
            // Update second calendar to be next month if needed
            if (year1 === year2 && month1 === month2) {
                let nextMonth = month2 + 1;
                let nextYear = year2;
                if (nextMonth > 11) {
                    nextMonth = 0;
                    nextYear++;
                }
                document.getElementById('month2').value = nextMonth;
                document.getElementById('year2').value = nextYear;
                renderCalendar('calendar2', nextMonth, nextYear);
            }
        }

        function renderCalendar(calendarId, month, year) {
            const calendar = document.getElementById(calendarId);
            const dayHeaders = calendar.querySelectorAll('.day-header');
            const existingDays = calendar.querySelectorAll('.calendar-day');
            existingDays.forEach(day => day.remove());
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay();
            
            // Add empty cells for days before the first day of the month
            for (let i = 0; i < startingDayOfWeek; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day other-month';
                emptyDay.textContent = '';
                calendar.appendChild(emptyDay);
            }
            
            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = day;
                dayElement.onclick = () => selectDate(day, month, year, calendarId);
                
                // Check if this date is in the past
                const today = new Date();
                const currentDate = new Date(year, month, day);
                if (currentDate < today.setHours(0, 0, 0, 0)) {
                    dayElement.classList.add('disabled');
                }
                
                // Check if this date is selected
                if (selectedStartDate && isSameDate(day, month, year, selectedStartDate)) {
                    dayElement.classList.add('start-date');
                } else if (selectedEndDate && isSameDate(day, month, year, selectedEndDate)) {
                    dayElement.classList.add('end-date');
                } else if (isDateInRange(day, month, year)) {
                    dayElement.classList.add('in-range');
                }
                
                calendar.appendChild(dayElement);
            }
        }

        function selectDate(day, month, year, calendarId) {
            const selectedDate = new Date(year, month, day);
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            if (selectedDate < today) return; // Don't allow past dates
            
            if (!selectedStartDate || (selectedStartDate && selectedEndDate)) {
                // Start new selection
                selectedStartDate = selectedDate;
                selectedEndDate = null;
                document.getElementById('moveInDate').value = formatDate(selectedDate);
                document.getElementById('moveOutDate').value = '';
                document.getElementById('moveInDate').classList.add('active');
                document.getElementById('moveOutDate').classList.remove('active');
            } else {
                // Complete selection
                if (selectedDate <= selectedStartDate) {
                    // If selected date is before start date, make it the new start date
                    selectedEndDate = selectedStartDate;
                    selectedStartDate = selectedDate;
                } else {
                    selectedEndDate = selectedDate;
                }
                document.getElementById('moveOutDate').value = formatDate(selectedEndDate);
                document.getElementById('moveInDate').classList.remove('active');
                document.getElementById('moveOutDate').classList.remove('active');
            }
            
            updateCalendar();
        }

        function isSameDate(day, month, year, date) {
            return date.getDate() === day && date.getMonth() === month && date.getFullYear() === year;
        }

        function isDateInRange(day, month, year) {
            if (!selectedStartDate || !selectedEndDate) return false;
            const currentDate = new Date(year, month, day);
            return currentDate > selectedStartDate && currentDate < selectedEndDate;
        }

        function formatDate(date) {
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            return `${months[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;
        }

        function changeMonth(direction) {
            const month1 = parseInt(document.getElementById('month1').value);
            const year1 = parseInt(document.getElementById('year1').value);
            
            if (direction === -1) {
                // Previous month
                let newMonth = month1 - 1;
                let newYear = year1;
                if (newMonth < 0) {
                    newMonth = 11;
                    newYear--;
                }
                document.getElementById('month1').value = newMonth;
                document.getElementById('year1').value = newYear;
            } else {
                // Next month
                let newMonth = month1 + 1;
                let newYear = year1;
                if (newMonth > 11) {
                    newMonth = 0;
                    newYear++;
                }
                document.getElementById('month1').value = newMonth;
                document.getElementById('year1').value = newYear;
            }
            
            updateCalendar();
        }

        function clearDates() {
            selectedStartDate = null;
            selectedEndDate = null;
            document.getElementById('moveInDate').value = '';
            document.getElementById('moveOutDate').value = '';
            document.getElementById('moveInDate').classList.remove('active');
            document.getElementById('moveOutDate').classList.remove('active');
            updateCalendar();
        }

        function applyDates() {
            if (selectedStartDate && selectedEndDate) {
                // Calculate minimum stay (30 days)
                const timeDiff = selectedEndDate.getTime() - selectedStartDate.getTime();
                const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
                
                if (daysDiff < 30) {
                    alert('Minimum stay is 30 days. Please select a longer period.');
                    return;
                }
                
                // Close the date selection and proceed with booking
                document.querySelector('.date-selection-section').style.display = 'none';
                document.querySelector('#bookingForm').style.display = 'block';
            } else {
                alert('Please select both move-in and move-out dates.');
            }
        }

        // Update the openBookingModal function
        function openBookingModal() {
            openModal('bookingModal');
            initializeDatePicker();
            // Show date selection first
            document.querySelector('.date-selection-section').style.display = 'block';
            document.querySelector('#bookingForm').style.display = 'none';
        }

        // Keyboard navigation for lightbox
        document.addEventListener('keydown', function(e) {
            const lightbox = document.querySelector('.image-lightbox-modal');
            if (lightbox) {
                if (e.key === 'Escape') {
                    document.body.removeChild(lightbox);
                    document.body.style.overflow = 'auto';
                } else if (e.key === 'ArrowLeft') {
                    navigateImage(-1);
                } else if (e.key === 'ArrowRight') {
                    navigateImage(1);
                }
            }
        });

        // Smooth scrolling for better UX
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add loading states to buttons
        document.querySelectorAll('.btn-primary, .btn-secondary').forEach(button => {
            button.addEventListener('click', function() {
                if (this.type === 'submit') {
                    const originalText = this.innerHTML;
                    this.innerHTML = '<span class="loading"></span> Processing...';
                    this.disabled = true;
                    
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.disabled = false;
                    }, 2000);
                }
            });
        });
    </script>
</body>
</html>